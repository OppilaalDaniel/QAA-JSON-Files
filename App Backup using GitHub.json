{"blocks":[{"id":"E855E014-9CB1-4EC0-B520-5A7E5C5FE9F8","type":"StartBlock","disabled":false,"name":"AppPublished","displayName":"App Published","comment":"","childId":"AB5AFA2D-2F2A-4F61-95C4-0CCA94C784D6","inputs":[{"id":"run_mode","value":"webhook","type":"select","structure":{}},{"id":"datasourcetype_guid","value":"61a87510-c7a3-11ea-95da-0fb0c241e75c","type":"select","displayValue":"Qlik Cloud Services","structure":[]},{"id":"webhook_event_guid","value":"365616d0-889f-11eb-a6c1-0fbe0dacf886","type":"select","displayValue":"App Published","structure":[]},{"id":"webhook_param_613e0f80-5ddb-11ec-ab88-0d44ac0c427c","value":"spaceId eq \"63109deacdc002266e7e013e\"","type":"string","structure":[],"lookupValues":{"63109deacdc002266e7e013e":"Test_Live (63109deacdc002266e7e013e)"}},{"id":"test_payload","value":"{\n  \"data\": {\n    \"attributes\": {\n      \"id\": \"4f5e293f-613b-4b35-94fb-8d1f51e0cf38\",\n      \"name\": \"updated2\",\n      \"owner\": \"auth0|763f637f15d88fe64d40773c68ae258f5ed099e69436be138353a65b1ea7c2e6\",\n      \"originAppId\": \"d76ccd23-0383-4bcc-b2eb-0f0271d0e9aa\"\n    }\n  },\n  \"source\": \"com.qlik/engine\",\n  \"eventId\": \"6e1171a3-4cce-4492-b087-30482139d84f\",\n  \"eventTime\": \"2021-09-09T07:44:10Z\",\n  \"eventType\": \"com.qlik.v1.app.published\",\n  \"extensions\": {\n    \"userId\": \"BlVarUAUM9I0ei3MmKMejlDaF1sKPnN5\",\n    \"spaceId\": \"6138a349faed485d36ae912b\",\n    \"tenantId\": \"WL69WlNT4PRbwAA8EZ1sDblqjthluHL1\"\n  },\n  \"contentType\": \"application/json\",\n  \"eventTypeVersion\": \"1.0.0\",\n  \"cloudEventsVersion\": \"0.1\"\n}","type":"json","structure":[]},{"id":"webhook_documentation","value":null,"type":"string","structure":{}}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":383.2744262852343,"y":-78.34316096588654,"logo":"https://cdn.qlikcloud.com/automations/logos/21dd4ad9985d490e7bfd7a644d783489.png"},{"id":"E26CD4AE-AA6D-45FD-A847-3FE081B06ED4","type":"EndpointBlock","disabled":false,"name":"getRepositoryContent","displayName":"GitHub - Get Repository Content","comment":"","childId":"10E86E3A-7AE9-420B-8645-6B401452A16B","inputs":[{"id":"1e75dde0-05ad-11ec-9362-9186e7ce05f8","value":"{$.owner}","type":"string","structure":[]},{"id":"1e7d4f20-05ad-11ec-a198-6d017b15b3f0","value":"{$.repo}","type":"string","structure":[]},{"id":"1e839d30-05ad-11ec-af7b-2f692f57fd82","value":"{$.getSpace.name}/{$.GetAppInformation.info.attributes.name}.qvf","type":"string","structure":[]},{"id":"eb723440-3ca5-11ec-9674-8339c43c1cb7","value":null,"type":"string","structure":[]}],"settings":[{"id":"datasource","value":"6e03c880-5a80-11ed-88b7-8945b4cda383","type":"select","structure":[]},{"id":"blendr_on_error","value":"warning","type":"select","displayValue":"Warning - Continue automation and report errors","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":101,"y":532,"datasourcetype_guid":"0d87808f-27c0-11ea-921c-022e6b5ea1e2","endpoint_guid":"1e437a20-05ad-11ec-8a78-57b6c22e3988","endpoint_role":"get"},{"id":"AB5AFA2D-2F2A-4F61-95C4-0CCA94C784D6","type":"VariableBlock","disabled":false,"name":"owner","displayName":"Variable - owner","comment":"Github Repo owner change here","childId":"794CBEB7-9829-4645-A93D-52DD60510404","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":120,"y":184,"variableGuid":"378FEEB9-2EE0-404C-8DD9-3775C617540E","operations":[{"id":"set_value","key":"124F98BD-59B2-4978-B7BF-F72B599660B9","name":"Set value of { variable }","value":"OppilaalDaniel"}]},{"id":"794CBEB7-9829-4645-A93D-52DD60510404","type":"VariableBlock","disabled":false,"name":"repo","displayName":"Variable - repo","comment":"Github repo name change here","childId":"C15F9C78-C83C-4EB4-83A7-EB47AF8B39FB","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":103,"y":304,"variableGuid":"D6E7B58C-128C-4E42-AF4B-5F473DDC56D5","operations":[{"id":"set_value","key":"5DE13717-C7E1-4F83-B017-22412D7A4E55","name":"Set value of { variable }","value":"Qlik-Apps-Backups"}]},{"id":"68289C54-D059-4855-B850-53964D97787E","type":"SnippetBlock","disabled":false,"name":"GetAppInformation","displayName":"Qlik Cloud Services - Get App Information","comment":"","childId":"A95170B2-0389-4977-B857-933A5F7F98A1","inputs":[{"id":"d3acbdc0-a8d2-11eb-8827-056900eab788","value":"{$.AppPublished.data.attributes.originAppId}","type":"string","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":89,"y":421,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","snippet_guid":"d3a8d4f0-a8d2-11eb-a81d-ffabb68491fb"},{"id":"10E86E3A-7AE9-420B-8645-6B401452A16B","type":"IfElseBlock","disabled":false,"name":"condition","displayName":"Condition","comment":"","childId":"4E00E0D9-F712-4214-B00F-BF31EBC47DA8","inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{$.getRepositoryContent.path}","input2":null,"operator":"empty"}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":113,"y":783,"childTrueId":"05967303-B4CE-4994-BBE4-EDDF7EB9FA7D","childFalseId":null},{"id":"05967303-B4CE-4994-BBE4-EDDF7EB9FA7D","type":"EndpointBlock","disabled":false,"name":"createOrUpdateFileContents","displayName":"GitHub - Create Or Update File Contents","comment":"","childId":"69D34718-52A9-4A46-807F-F739E8275F2E","inputs":[{"id":"c0370450-05a8-11ec-b854-2f300eb6fbf0","value":"{$.owner}","type":"string","structure":[]},{"id":"c046f740-05a8-11ec-8d20-9dcf87f2c165","value":"{$.repo}","type":"string","structure":[]},{"id":"c04fd120-05a8-11ec-8210-cb51bee674e4","value":"No Description","type":"string","structure":[]},{"id":"c059e560-05a8-11ec-8236-899ea1ccb8e8","value":"{$.getSpace.name}/{$.GetAppInformation.info.attributes.name}.qvf","type":"string","structure":[]},{"id":"c0707630-05a8-11ec-b3a0-b3314a2ce223","value":"{$.exportAppToBase64EncodedFile}","type":"string","structure":[]},{"id":"7b8fd570-05ab-11ec-81f9-dfee737c7710","value":"main","type":"string","structure":[]},{"id":"8fe536c0-05ab-11ec-9eee-79f5f7e4ea13","value":null,"type":"string","structure":[]}],"settings":[{"id":"datasource","value":"6e03c880-5a80-11ed-88b7-8945b4cda383","type":"select","structure":[]},{"id":"blendr_on_error","value":"warning","type":"select","displayValue":"Warning - Continue automation and report errors","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":222,"y":899,"datasourcetype_guid":"0d87808f-27c0-11ea-921c-022e6b5ea1e2","endpoint_guid":"c0096fc0-05a8-11ec-9c49-3d209ed5ca0f","endpoint_role":"create"},{"id":"A95170B2-0389-4977-B857-933A5F7F98A1","type":"SnippetBlock","disabled":false,"name":"exportAppToBase64EncodedFile","displayName":"Qlik Cloud Services - Export App To Base 64 Encoded File","comment":"Export App without data","childId":"E26CD4AE-AA6D-45FD-A847-3FE081B06ED4","inputs":[{"id":"c0930c20-8645-11eb-8c79-17357db3794c","value":"{$.GetAppInformation.info.attributes.id}","type":"string","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":139,"y":521,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","snippet_guid":"c08e2d30-8645-11eb-b98e-e77d5a1bebc3"},{"id":"4E00E0D9-F712-4214-B00F-BF31EBC47DA8","type":"EndpointBlock","disabled":false,"name":"createOrUpdateFileContents3","displayName":"GitHub - Create Or Update File Contents 3","comment":"","childId":"13B9F3BC-1606-479A-A58A-C101EE08D6B5","inputs":[{"id":"c0370450-05a8-11ec-b854-2f300eb6fbf0","value":"{$.owner}","type":"string","structure":[]},{"id":"c046f740-05a8-11ec-8d20-9dcf87f2c165","value":"{$.repo}","type":"string","structure":[]},{"id":"c04fd120-05a8-11ec-8210-cb51bee674e4","value":"NoDesc","type":"string","structure":[]},{"id":"c059e560-05a8-11ec-8236-899ea1ccb8e8","value":"{$.getSpace.name}/{$.GetAppInformation.info.attributes.name}.qvf","type":"string","structure":[]},{"id":"c0707630-05a8-11ec-b3a0-b3314a2ce223","value":"{$.exportAppToBase64EncodedFile}","type":"string","structure":[]},{"id":"7b8fd570-05ab-11ec-81f9-dfee737c7710","value":"main","type":"string","structure":[]},{"id":"8fe536c0-05ab-11ec-9eee-79f5f7e4ea13","value":"{$.getRepositoryContent.sha}","type":"string","structure":[]}],"settings":[{"id":"datasource","value":"6e03c880-5a80-11ed-88b7-8945b4cda383","type":"select","structure":[]},{"id":"blendr_on_error","value":"warning","type":"select","displayValue":"Warning - Continue automation and report errors","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":261,"y":1210,"datasourcetype_guid":"0d87808f-27c0-11ea-921c-022e6b5ea1e2","endpoint_guid":"c0096fc0-05a8-11ec-9c49-3d209ed5ca0f","endpoint_role":"create"},{"id":"13B9F3BC-1606-479A-A58A-C101EE08D6B5","type":"EndpointBlock","disabled":false,"name":"sendMessage","displayName":"Microsoft Teams - Send Message","comment":"","childId":"D11110C2-13F1-4A41-A0E2-EA21D241C458","inputs":[{"id":"ce80c8c0-d33a-11eb-a1be-fb85dcd48977","value":"be12b285-da55-4310-b353-fdf48e2032d6","type":"string","displayValue":"Qlik Automation Test","structure":[]},{"id":"ce8be4d0-d33a-11eb-aa74-37bc58fc7293","value":"19:ta9HSam1Gbd1HCcNFy0JcolaUffoKw08oSpKz2IqQEI1@thread.tacv2","type":"string","displayValue":"General","structure":[]},{"id":"ce9788f0-d33a-11eb-a754-31a1e548ae07","value":"<h2>App Published in production</h2>\n<p>{$.AppPublished.data.attributes.name} published on {$.getSpace.name}</p>\n<p>App saved on Github repo {$.repo} on {$.owner}</p>\n<p>Github commit id: {$.createOrUpdateFileContents3.commit.sha}  </p>","type":"string","structure":[]},{"id":"cebb4240-d33a-11eb-86c4-cf0a4f744ace","value":null,"type":"string","structure":[]}],"settings":[{"id":"datasource","value":"ebd9fdc0-f789-11ec-839f-658ebae5d9b3","type":"select","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":253,"y":1281,"datasourcetype_guid":"0d87af8f-27c0-11ea-921c-022e6b5ea1e2","endpoint_guid":"ce5ffe30-d33a-11eb-b284-3955388e8c59","endpoint_role":"create"},{"id":"C15F9C78-C83C-4EB4-83A7-EB47AF8B39FB","type":"EndpointBlock","disabled":false,"name":"getSpace","displayName":"Qlik Cloud Services - Get Space","comment":"Check if the published space is a Production space","childId":"68289C54-D059-4855-B850-53964D97787E","inputs":[{"id":"92f7bcd0-6d2d-11eb-9088-69419de8f253","value":"{$.AppPublished.extensions.spaceId}","type":"string","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":119,"y":421,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"92afefd0-6d2d-11eb-aee2-055653605a8e","endpoint_role":"get"},{"id":"69D34718-52A9-4A46-807F-F739E8275F2E","type":"EndpointBlock","disabled":false,"name":"sendMessage2","displayName":"Microsoft Teams - Send Message 2","comment":"","childId":"4CEB3190-E2BC-484C-85D8-651825A605CF","inputs":[{"id":"ce80c8c0-d33a-11eb-a1be-fb85dcd48977","value":"be12b285-da55-4310-b353-fdf48e2032d6","type":"string","displayValue":"Qlik Automation Test","structure":[]},{"id":"ce8be4d0-d33a-11eb-aa74-37bc58fc7293","value":"19:ta9HSam1Gbd1HCcNFy0JcolaUffoKw08oSpKz2IqQEI1@thread.tacv2","type":"string","displayValue":"General","structure":[]},{"id":"ce9788f0-d33a-11eb-a754-31a1e548ae07","value":"<h2>App Published in production</h2>\n<p>{$.AppPublished.data.attributes.name} published on {$.getSpace.name}</p>\n<p>App saved on Github repo {$.repo} on {$.owner}</p>\n<p>Github commit id: {$.createOrUpdateFileContents.commit.sha}</p>","type":"string","structure":[]},{"id":"cebb4240-d33a-11eb-86c4-cf0a4f744ace","value":null,"type":"string","structure":[]}],"settings":[{"id":"datasource","value":"ebd9fdc0-f789-11ec-839f-658ebae5d9b3","type":"select","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":254,"y":1095,"datasourcetype_guid":"0d87af8f-27c0-11ea-921c-022e6b5ea1e2","endpoint_guid":"ce5ffe30-d33a-11eb-b284-3955388e8c59","endpoint_role":"create"},{"id":"4CEB3190-E2BC-484C-85D8-651825A605CF","type":"StopBlock","disabled":false,"name":"stop","displayName":"Stop","comment":"","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-289.8515606369525,"y":1241.606104812003},{"id":"D11110C2-13F1-4A41-A0E2-EA21D241C458","type":"StopBlock","disabled":false,"name":"stop2","displayName":"Stop 2","comment":"","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-297.8827570883968,"y":1331.287798519797}],"variables":[{"guid":"378FEEB9-2EE0-404C-8DD9-3775C617540E","name":"owner","type":"string"},{"guid":"D6E7B58C-128C-4E42-AF4B-5F473DDC56D5","name":"repo","type":"string"}]}